/*Obfuscated by JShaman.com*/const app=getApp();var request=require('../../../utils/request.js');Page({'data':{'log':null,'isFace':![],'canvasWidth':app['globalData']['_w'],'canvasHeight':app['globalData']['_h'],'CustomBar':app['globalData']['CustomBar'],'userlogo':'','bgpic':'https://sunjian-1304419014.cos.ap-beijing.myqcloud.com/faceApp/prize/fl.jpg','background':['demo-text-1'],'indicatorDots':!![],'vertical':![],'autoplay':![],'circular':![],'interval':0x7d0,'duration':0x1f4,'previousMargin':0x0,'nextMargin':0x0},'onChooseAvatar'(_0x58f928){this['data']['logo']=_0x58f928['detail']['avatarUrl'];var _0x33a6d5=wx['createCanvasContext']('firstCanvas');this['drawRoundImage'](0x21744^0x2176c,0xa2ac7^0xa2aef,0x2f6e1^0x2f6f3,0xa7899^0xa78ae,0x68b8c^0x68b98,this['data']['logo'],_0x33a6d5);},'drawRoundImage'(_0x43bed5,_0x5a27c4,_0x5207a3,_0x308dea,_0x2c9622,_0x2b7682,_0x1039a5){_0x1039a5['save']();_0x1039a5['beginPath']();_0x1039a5['arc'](_0x5207a3+_0x2c9622,_0x308dea+_0x2c9622,_0x2c9622,Math['PI'],Math['PI']*1.5);_0x1039a5['arc'](_0x5207a3+_0x43bed5-_0x2c9622,_0x308dea+_0x2c9622,_0x2c9622,Math['PI']*1.5,Math['PI']*(0xa7f62^0xa7f60));_0x1039a5['arc'](_0x5207a3+_0x43bed5-_0x2c9622,_0x308dea+_0x5a27c4-_0x2c9622,_0x2c9622,0x5b043^0x5b043,Math['PI']*0.5);_0x1039a5['arc'](_0x5207a3+_0x2c9622,_0x308dea+_0x5a27c4-_0x2c9622,_0x2c9622,Math['PI']*0.5,Math['PI']);_0x1039a5['clip']();_0x1039a5['drawImage'](_0x2b7682,_0x5207a3,_0x308dea,_0x43bed5,_0x5a27c4);_0x1039a5['restore']();_0x1039a5['draw'](!![]);},'onLoad':function(_0x24352d){wx['showLoading']({'title':'初始化'});request['checkFollow'](_0xd0703=>{if(_0xd0703['error']==(0x84a17^0x84a17)){let _0xfc1aef=_0xd0703['data'];this['setData']({'userlogo':_0xfc1aef['qrCodeImg']});wx['getImageInfo']({'src':this['data']['bgpic'],'success':_0x438a97=>{let _0x120c2e=_0x438a97['path'];wx['getImageInfo']({'src':this['data']['userlogo'],'success':_0x54c412=>{this['drawImg'](_0x120c2e,_0x54c412['path']);},'fail':_0x43bfe4=>{console['warn'](_0x43bfe4);}});}});}else{wx['hideLoading']();wx['showModal']({'title':'您还未关注素颜照优惠公众号','content':'是否进行关注？','cancelText':'取消','confirmText':'去关注','success':_0x34df94=>{this['setData']({'isFace':!![]});if(_0x34df94['confirm']){wx['navigateTo']({'url':'/packageA/pages/about/about'});}}});}});},'openFace'(){wx['navigateTo']({'url':'/packageA/pages/about/about'});},'drawImg'(_0x1afe9b,_0x2397f1){wx['createSelectorQuery']()['selectAll']('.sw')['boundingClientRect'](_0x441034=>{var _0x418de6=wx['createCanvasContext']('firstCanvas');let _0x5ad497=_0x441034[0x0]['width']*1.41;let _0x38d0d3=_0x441034[0x0]['height'];if(_0x5ad497<app['globalData']['_h']){_0x418de6['drawImage'](_0x1afe9b,0x0,0x32,_0x441034[0x0]['width'],_0x5ad497);_0x418de6['drawImage'](_0x2397f1,_0x441034[0x0]['width']-_0x441034[0x0]['width']*0.3-(0xe2b70^0xe2b7a),_0x5ad497-_0x441034[0x0]['width']*0.3*0.5-(0x60bb2^0x60bb8),_0x441034[0x0]['width']*0.3,_0x441034[0x0]['width']*0.3);this['setData']({'canvasHeight':_0x5ad497+0x32});}else{_0x418de6['drawImage'](_0x1afe9b,0x0,0x5a1a8^0x5a1a8,_0x441034[0x0]['width'],_0x5ad497);_0x418de6['drawImage'](_0x2397f1,_0x441034[0xec1a9^0xec1a9]['width']-_0x441034[0x0]['width']*0.3-0xa,_0x5ad497-_0x441034[0x0]['width']*0.3-0xa,_0x441034[0x194ed^0x194ed]['width']*0.3,_0x441034[0x0]['width']*0.3);this['setData']({'canvasHeight':_0x5ad497});}_0x418de6['draw'](!![]);wx['hideLoading']();})['exec']();},'saveImg':function(){wx['showLoading']({'title':'生成中'});wx['canvasToTempFilePath']({'canvasId':'firstCanvas','success':_0x8e93ad=>{var _0x32e71b=_0x8e93ad['tempFilePath'];console['warn'](_0x32e71b);wx['saveImageToPhotosAlbum']({'filePath':_0x32e71b,'success':_0xfcd657=>{wx['showToast']({'title':'已保存到相册','icon':'success','duration':0x64});},'fail':_0x35ff3e=>{wx['hideLoading']();if(_0x35ff3e['errMsg']=='saveImageToPhotosAlbum:fail\x20auth\x20deny'){wx['showModal']({'title':'保存相册权限','content':'访问您的相册权限，需要小程序的设置中打开相册功能','cancelText':'取消','confirmText':'去设置','success':_0x33e8dd=>{if(_0x33e8dd['confirm']){wx['openSetting']({'withSubscriptions':!![]});}}});}}});},'fail':function(_0x2856d4){}});},'onReady':function(){},'onShow':function(){},'onHide':function(){},'onUnload':function(){},'onPullDownRefresh':function(){},'onReachBottom':function(){},'onShareAppMessage':function(_0x210653){if(_0x210653['from']=='button'){}}});
/*Obfuscated by JShaman.com*/var request=require('../../../utils/request.js');var crypto=require('../../../utils/crypto.js');const app=getApp();function trim(_0x18ed97){_0x18ed97=_0x18ed97+'';if(_0x18ed97==''){return _0x18ed97;}if(_0x18ed97!=undefined&&_0x18ed97!=null&&_0x18ed97!=''){return _0x18ed97['replace'](/(^\s*)|(\s*$)/g,'');}return _0x18ed97;}Page({'data':{'showPay':!![],'showLoadingAddress':![],'addressId':null,'addressTxt':'','payType':0x0,'payCount':0x1,'modalName':null,'showApp':!![],'isLoad':![],'isRequest':![],'info':{},'swiperList':[]},'goScore'(){this['setData']({'modalName':'bottomModalScore','payType':0x0});},'goMoney'(){this['setData']({'modalName':'bottomModalScore','payType':0x1});},'changeNumber'(_0xcd777e){let _0x530935=_0xcd777e['currentTarget']['dataset']['type'];if(_0x530935==(0x9358c^0x9358c)){if(this['data']['payCount']<=(0x261cc^0x261cd)){this['setData']({'payCount':0x1});}else{this['data']['payCount']--;this['setData']({'payCount':this['data']['payCount']});}}else{this['data']['payCount']++;this['setData']({'payCount':this['data']['payCount']});}this['data']['info']['price']=this['data']['info']['oldPrice']*this['data']['payCount'];this['data']['info']['score']=this['data']['info']['oldScore']*this['data']['payCount'];this['setData']({'info':this['data']['info']});},'hideModal'(){this['setData']({'modalName':null});},'onLoad':function(_0x4d8985){if(app['globalData']['apiInfo']['showPay']==(0x65842^0x65842)){this['setData']({'showPay':!![]});}else{this['setData']({'showPay':![]});}let _0x24df35=_0x4d8985['id'];request['searchModDetail'](_0x24df35,_0x5ad074=>{let _0x14e2e9=_0x5ad074['data'];_0x14e2e9['oldPrice']=_0x14e2e9['price'];_0x14e2e9['oldScore']=_0x14e2e9['score'];let _0x6283a4=_0x14e2e9['imgList']['split'](',');_0x6283a4['forEach']((_0x101f2b,_0x323a3f)=>{this['data']['swiperList']['push']({'url':_0x101f2b});});_0x14e2e9['imgList']=_0x6283a4;this['setData']({'swiperList':this['data']['swiperList'],'info':_0x14e2e9});});},'openAddress'(){wx['navigateTo']({'url':'/packageA/pages/address/address'});},'refreshAddress'(){this['setData']({'showLoadingAddress':!![]});request['searchUserDefaultAddressInfo'](_0x99a376=>{if(_0x99a376['error']==(0x1d4c0^0x1d4c0)&&_0x99a376['data']!=null){this['data']['addressTxt']=this['createShowAddress'](_0x99a376['data']);this['setData']({'addressId':_0x99a376['data']['uid'],'addressTxt':this['data']['addressTxt']});}else{this['setData']({'addressId':null,'addressTxt':''});}this['setData']({'showLoadingAddress':![]});});},'createShowAddress'(_0x27de45){_0x27de45['_userName']=_0x27de45['userName']['charAt'](0x63567^0x63567)+'*';_0x27de45['_telNumber']=_0x27de45['telNumber']['substring'](0xe0b25^0xe0b25,0x70be6^0x70be5)+'****'+_0x27de45['telNumber']['substring'](0x4f82d^0x4f82a);_0x27de45['_provinceName']=_0x27de45['provinceName']['charAt'](0xd6a9b^0xd6a9b)+'***'+_0x27de45['provinceName']['charAt'](_0x27de45['provinceName']['length']-(0x92f78^0x92f79));_0x27de45['_cityName']=_0x27de45['cityName']['charAt'](0x0)+'***'+_0x27de45['cityName']['charAt'](_0x27de45['cityName']['length']-0x1);_0x27de45['_countryName']='***'+_0x27de45['countryName']['charAt'](_0x27de45['countryName']['length']-0x1);_0x27de45['_detailInfo']=trim(_0x27de45['detailInfo'])['charAt'](0x0);_0x27de45['_detailInfo']=_0x27de45['_detailInfo']+'***'+trim(_0x27de45['detailInfo'])['charAt'](_0x27de45['detailInfo']['length']-0x1)+'***';return _0x27de45['_provinceName']+_0x27de45['_cityName']+_0x27de45['_countryName']+_0x27de45['_detailInfo'];},'submitHand'(){if(this['data']['addressId']==null){wx['showToast']({'title':'未选择收货地址','icon':'none'});return;}if(this['data']['payCount']==null||this['data']['payCount']==''||this['data']['payCount']<0x1){wx['showToast']({'title':'未选择商品数量','icon':'none'});return;}if(this['data']['payType']==(0x632f2^0x632f2)){wx['showLoading']({'title':'支付中'});request['payScoreShop'](this['data']['info']['uid'],this['data']['payCount'],this['data']['addressId'],_0x31baf5=>{wx['hideLoading']();console['warn'](_0x31baf5);if(_0x31baf5['error']==0x0){this['hideModal']();wx['showModal']({'title':'提示','content':'兑换成功,是否前往订单页查看','showCancel':!![],'confirmText':'查看','success':_0x2ee555=>{if(_0x2ee555['confirm']){wx['navigateTo']({'url':'/packageA/pages/orderHistory/dhOrderHistory/dhOrderHistory'});}}});}else{wx['showToast']({'title':_0x31baf5['msg'],'icon':'none'});}});}else{let _0x2d3537={'modUid':this['data']['info']['uid'],'payCount':this['data']['payCount'],'addressId':this['data']['addressId']};_0x2d3537['fromType']='payItemMod';_0x2d3537['positionId']=app['globalData']['userInfo']['positionId'];request['openApp']('wx2e2190862d71f2b0','/pages/paymonth/paymonth?json='+crypto['encrypted'](JSON['stringify'](_0x2d3537)),_0x17ce1a=>{wx['showModal']({'title':'支付操作','content':'请确认您是否已完成支付操作','cancelText':'取消支付','confirmText':'完成支付','confirmColor':'#07c160','success':_0x41d9b2=>{this['hideModal']();if(_0x41d9b2['confirm']){wx['navigateTo']({'url':'/packageA/pages/orderHistory/dhOrderHistory/dhOrderHistory'});}}});});return;request['payMod'](this['data']['info']['uid'],this['data']['payCount'],this['data']['addressId'],_0x270bb1=>{wx['hideLoading']();if(_0x270bb1['error']==0x1){wx['showModal']({'title':'提示','content':_0x270bb1['msg'],'showCancel':![]});return;}wx['requestPayment']({'timeStamp':_0x270bb1['timeStamp'],'nonceStr':_0x270bb1['nonceStr'],'package':_0x270bb1['package'],'signType':_0x270bb1['signType'],'paySign':_0x270bb1['paySign'],'success':_0x161e71=>{if(_0x161e71['errMsg']=='requestPayment:ok'){wx['showModal']({'title':'支付操作','content':'请确认您是否已完成支付操作','cancelText':'取消支付','confirmText':'完成支付','confirmColor':'#07c160','success':_0x1ff8fe=>{this['hideModal']();if(_0x1ff8fe['confirm']){wx['navigateTo']({'url':'/packageA/pages/orderHistory/dhOrderHistory/dhOrderHistory'});}}});}else{wx['showToast']({'title':_0x161e71['errMsg'],'icon':'none'});}},'fail':_0xaaa84f=>{if(_0xaaa84f['errMsg']=='requestPayment:fail\x20cancel'){wx['showToast']({'title':'已取消支付','icon':'none'});}else{wx['showToast']({'title':_0xaaa84f['errMsg'],'icon':'none'});}}});});}},'addShopCar'(){let _0x4df0b5=wx['getStorageSync']('carList');if(_0x4df0b5==''||_0x4df0b5==undefined||_0x4df0b5==null){_0x4df0b5=[this['data']['info']['uid']];}else{let _0x2c2a9f=![];_0x4df0b5['forEach']((_0x36de22,_0x24ec60)=>{if(_0x36de22==this['data']['info']['uid']){_0x2c2a9f=!![];}});if(_0x2c2a9f==![]){_0x4df0b5['push'](this['data']['info']['uid']);}}wx['showToast']({'title':'已加入'});wx['setStorageSync']('carList',_0x4df0b5);},'onReady':function(){},'onShow':function(){},'onHide':function(){},'onUnload':function(){var _0x3ea207=getCurrentPages();var _0x38f8c7=_0x3ea207[_0x3ea207['length']-0x2];_0x38f8c7['refreshCarshop']();},'onPullDownRefresh':function(){},'onReachBottom':function(){},'onShareAppMessage':function(){},'onShareAppMessage'(){}});
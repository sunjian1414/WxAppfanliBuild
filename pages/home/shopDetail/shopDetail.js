/*Obfuscated by JShaman.com*/var request=require('../../../utils/request.js');var crypto=require('../../../utils/crypto.js');const app=getApp();function trim(_0x2e4746){_0x2e4746=_0x2e4746+'';if(_0x2e4746==''){return _0x2e4746;}if(_0x2e4746!=undefined&&_0x2e4746!=null&&_0x2e4746!=''){return _0x2e4746['replace'](/(^\s*)|(\s*$)/g,'');}return _0x2e4746;}Page({'data':{'showLoadingAddress':![],'addressId':null,'addressTxt':'','payType':0x0,'payCount':0x1,'modalName':null,'showApp':!![],'isLoad':![],'isRequest':![],'info':{},'swiperList':[]},'goScore'(){this['setData']({'modalName':'bottomModalScore','payType':0x0});},'goMoney'(){this['setData']({'modalName':'bottomModalScore','payType':0x1});},'changeNumber'(_0x56deb9){let _0x5ca02f=_0x56deb9['currentTarget']['dataset']['type'];if(_0x5ca02f==(0x36efa^0x36efa)){if(this['data']['payCount']<=(0x57c57^0x57c56)){this['setData']({'payCount':0x1});}else{this['data']['payCount']--;this['setData']({'payCount':this['data']['payCount']});}}else{this['data']['payCount']++;this['setData']({'payCount':this['data']['payCount']});}this['data']['info']['price']=this['data']['info']['oldPrice']*this['data']['payCount'];this['data']['info']['score']=this['data']['info']['oldScore']*this['data']['payCount'];this['setData']({'info':this['data']['info']});},'hideModal'(){this['setData']({'modalName':null});},'onLoad':function(_0x2177d0){let _0xaaf546=_0x2177d0['id'];request['searchModDetail'](_0xaaf546,_0x568cc5=>{let _0x26d383=_0x568cc5['data'];_0x26d383['oldPrice']=_0x26d383['price'];_0x26d383['oldScore']=_0x26d383['score'];let _0x52c81a=_0x26d383['imgList']['split'](',');_0x52c81a['forEach']((_0x4554eb,_0x57faab)=>{this['data']['swiperList']['push']({'url':_0x4554eb});});_0x26d383['imgList']=_0x52c81a;this['setData']({'swiperList':this['data']['swiperList'],'info':_0x26d383});});},'openAddress'(){wx['navigateTo']({'url':'/packageA/pages/address/address'});},'refreshAddress'(){this['setData']({'showLoadingAddress':!![]});request['searchUserDefaultAddressInfo'](_0x45d4e5=>{if(_0x45d4e5['error']==(0x5e441^0x5e441)&&_0x45d4e5['data']!=null){this['data']['addressTxt']=this['createShowAddress'](_0x45d4e5['data']);this['setData']({'addressId':_0x45d4e5['data']['uid'],'addressTxt':this['data']['addressTxt']});}else{this['setData']({'addressId':null,'addressTxt':''});}this['setData']({'showLoadingAddress':![]});});},'createShowAddress'(_0x11d8bd){_0x11d8bd['_userName']=_0x11d8bd['userName']['charAt'](0x601b2^0x601b2)+'*';_0x11d8bd['_telNumber']=_0x11d8bd['telNumber']['substring'](0x7dfe3^0x7dfe3,0x4caff^0x4cafc)+'****'+_0x11d8bd['telNumber']['substring'](0xc153b^0xc153c);_0x11d8bd['_provinceName']=_0x11d8bd['provinceName']['charAt'](0x5c202^0x5c202)+'***'+_0x11d8bd['provinceName']['charAt'](_0x11d8bd['provinceName']['length']-(0x8aed8^0x8aed9));_0x11d8bd['_cityName']=_0x11d8bd['cityName']['charAt'](0x1936a^0x1936a)+'***'+_0x11d8bd['cityName']['charAt'](_0x11d8bd['cityName']['length']-(0x5f3d8^0x5f3d9));_0x11d8bd['_countryName']='***'+_0x11d8bd['countryName']['charAt'](_0x11d8bd['countryName']['length']-(0x21470^0x21471));_0x11d8bd['_detailInfo']=trim(_0x11d8bd['detailInfo'])['charAt'](0x0);_0x11d8bd['_detailInfo']=_0x11d8bd['_detailInfo']+'***'+trim(_0x11d8bd['detailInfo'])['charAt'](_0x11d8bd['detailInfo']['length']-0x1)+'***';return _0x11d8bd['_provinceName']+_0x11d8bd['_cityName']+_0x11d8bd['_countryName']+_0x11d8bd['_detailInfo'];},'submitHand'(){if(this['data']['addressId']==null){wx['showToast']({'title':'未选择收货地址','icon':'none'});return;}if(this['data']['payCount']==null||this['data']['payCount']==''||this['data']['payCount']<(0x32b90^0x32b91)){wx['showToast']({'title':'未选择商品数量','icon':'none'});return;}if(this['data']['payType']==(0xd1eb1^0xd1eb1)){wx['showLoading']({'title':'支付中'});request['payScoreShop'](this['data']['info']['uid'],this['data']['payCount'],this['data']['addressId'],_0x451234=>{wx['hideLoading']();console['warn'](_0x451234);if(_0x451234['error']==(0xe0bf6^0xe0bf6)){this['hideModal']();wx['showModal']({'title':'提示','content':'兑换成功,是否前往订单页查看','showCancel':!![],'confirmText':'查看','success':_0xd431c3=>{if(_0xd431c3['confirm']){wx['navigateTo']({'url':'/packageA/pages/orderHistory/dhOrderHistory/dhOrderHistory'});}}});}else{wx['showToast']({'title':_0x451234['msg'],'icon':'none'});}});}else{let _0x1c7706={'modUid':this['data']['info']['uid'],'payCount':this['data']['payCount'],'addressId':this['data']['addressId']};_0x1c7706['fromType']='payItemMod';_0x1c7706['positionId']=app['globalData']['userInfo']['positionId'];request['openApp']('wx2e2190862d71f2b0','/pages/paymonth/paymonth?json='+crypto['encrypted'](JSON['stringify'](_0x1c7706)),_0x4b9114=>{wx['showModal']({'title':'支付操作','content':'请确认您是否已完成支付操作','cancelText':'取消支付','confirmText':'完成支付','confirmColor':'#07c160','success':_0x434955=>{this['hideModal']();if(_0x434955['confirm']){wx['navigateTo']({'url':'/packageA/pages/orderHistory/dhOrderHistory/dhOrderHistory'});}}});});return;request['payMod'](this['data']['info']['uid'],this['data']['payCount'],this['data']['addressId'],_0x3f517f=>{wx['hideLoading']();if(_0x3f517f['error']==0x1){wx['showModal']({'title':'提示','content':_0x3f517f['msg'],'showCancel':![]});return;}wx['requestPayment']({'timeStamp':_0x3f517f['timeStamp'],'nonceStr':_0x3f517f['nonceStr'],'package':_0x3f517f['package'],'signType':_0x3f517f['signType'],'paySign':_0x3f517f['paySign'],'success':_0xd99dbf=>{if(_0xd99dbf['errMsg']=='requestPayment:ok'){wx['showModal']({'title':'支付操作','content':'请确认您是否已完成支付操作','cancelText':'取消支付','confirmText':'完成支付','confirmColor':'#07c160','success':_0x53725a=>{this['hideModal']();if(_0x53725a['confirm']){wx['navigateTo']({'url':'/packageA/pages/orderHistory/dhOrderHistory/dhOrderHistory'});}}});}else{wx['showToast']({'title':_0xd99dbf['errMsg'],'icon':'none'});}},'fail':_0x1de863=>{if(_0x1de863['errMsg']=='requestPayment:fail\x20cancel'){wx['showToast']({'title':'已取消支付','icon':'none'});}else{wx['showToast']({'title':_0x1de863['errMsg'],'icon':'none'});}}});});}},'addShopCar'(){let _0x4e899b=wx['getStorageSync']('carList');if(_0x4e899b==''||_0x4e899b==undefined||_0x4e899b==null){_0x4e899b=[this['data']['info']['uid']];}else{let _0x531b16=![];_0x4e899b['forEach']((_0x447d28,_0x57fdb9)=>{if(_0x447d28==this['data']['info']['uid']){_0x531b16=!![];}});if(_0x531b16==![]){_0x4e899b['push'](this['data']['info']['uid']);}}wx['showToast']({'title':'已加入'});wx['setStorageSync']('carList',_0x4e899b);},'onReady':function(){},'onShow':function(){},'onHide':function(){},'onUnload':function(){var _0x443357=getCurrentPages();var _0x3ccee5=_0x443357[_0x443357['length']-0x2];_0x3ccee5['refreshCarshop']();},'onPullDownRefresh':function(){},'onReachBottom':function(){},'onShareAppMessage':function(){},'onShareAppMessage'(){}});